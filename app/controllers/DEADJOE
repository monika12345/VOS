
*** These modified files were found in JOE when it aborted on Mon Apr  6 01:03:45 2015
*** JOE was aborted because the terminal closed

*** File 'users_controller.rb'
class UsersController < ApplicationController
before_action :logged_in_user, only: [:index, :edit, :update, :destroy]
before_action :correct_user, only: [:edit, :update]
before_action :admin_user,  only: :destroy

   def show
       @user = User.find(params[:id])
   end


 def index
    @users = User.paginate(page: params[:page])
 end


 
   def destroy
       User.find(params[:id]).destroy
       flash[:success] = "User deleted"
       redirect_to users_url
  end
                 
 def user_params
       params.require(:user).permit(:name, :email, :password,
                                          :password_confirmation)
 end                
                 

  def new
     @user = User.new
  end
  

  def create
      @user = User.new(user_params)
      if @user.save
        log_in @user
        flash[:success] = "Welcome to the Sample App!"
        redirect_to @user
      else
       render 'new'
       end
      end

   def edit 
     @user = User.find(params[:id])
   end 
   
   def update
     @user = User.find(params[:id])
     if @user.update_attributes(user_params)
        flash[:success] = "Profile update"
        redirect_to @user     
     else
        render 'edit'
     end
   end
   
   
   
   
    private
    
       
  def admin_user
     redirect_to(root_url) unless current_user.admin?
  end
      
  
    
  def logged_in_user
      unless logged_in?
      store_location
      flash[:danger] = "Please log in."
      redirect_to login_url
    end
  end
  
  
  #Confirm the correct user
  def correct_user
      @user = User.find(params[:id])
      redirect_to(root_url) unless current_user?(@user)
   end
end



*** File '(Unnamed)'
registration.html.erb
new.html.erb
new.html.erb
new.html.erb
new.html.erb
services/
new.html.erb
new.html.erb
static_pages_controller.rb
static_pages_controller.rb
users_controller.rb

*** These modified files were found in JOE when it aborted on Thu Apr  9 21:46:53 2015
*** JOE was aborted because the terminal closed

*** File 'parking_places_controller.rb'
class ParkingPlacesController < ApplicationController
 before_action :logged_in_user, only: [:create, :destroy]  

  def new 
    @parking_place = ParkingPlace.new
  end

  def show
    @parking_place = ParkingPlace.find(params[:id])
    @user = User.find(@parking_place.user_id)
   
  end
  
  def index
    @parking_places= ParkingPlace.all
    @parking_places = ParkingPlace.paginate(page: params[:page])
  end
  
  def create
      @parking_place = current_user.parking_places.build(parking_places_params)
      if @parking_place.save
            flash[:success] = "Parkovacie miesto vytvorene"
            redirect_to root_url
       else
          render 'static_pages/login'
       end
   end


def destroy
end

 private
 
 def parking_places_params
  
   params.require(:parking_place).permit(:spz)
 end
end 
*** File '(Unnamed)'
park
parking_place.rb
parking_place.rb
parking_place.rb
parking_place.rb
parking_places_controller.rb
parking_places_controller.rb
parking_places_controller.rb
parking_place.rb
user.rb
parking_places_controller.rb
